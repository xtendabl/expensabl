<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>expensabl automation hub</title>
    <style>
      /* CSS Variables for theming */
      :root {
        --bg-primary: #f5f5f5;
        --bg-secondary: white;
        --bg-card: white;
        --bg-hover: #f8f9fa;
        --bg-input: white;
        --text-primary: #333;
        --text-secondary: #666;
        --text-muted: #6c757d;
        --text-light: #495057;
        --border-color: #dee2e6;
        --border-light: #e9ecef;
        --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
        --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.15);
        --btn-primary-bg: #007bff;
        --btn-primary-hover: #0056b3;
        --btn-secondary-bg: #6c757d;
        --btn-secondary-hover: #545b62;
        --btn-success-bg: #28a745;
        --btn-success-hover: #218838;
        --btn-danger-bg: #dc3545;
        --btn-danger-hover: #c82333;
        --status-approved: #d4edda;
        --status-approved-text: #155724;
        --status-pending: #fff3cd;
        --status-pending-text: #856404;
        --status-rejected: #f8d7da;
        --status-rejected-text: #721c24;
        --status-unknown: #e2e3e5;
        --status-unknown-text: #495057;
        --toast-success-bg: #d4edda;
        --toast-error-bg: #f8d7da;
        --toast-info-bg: #d1ecf1;
        --scrollbar-track: #f1f1f1;
        --scrollbar-thumb: #c1c1c1;
        --scrollbar-thumb-hover: #a1a1a1;
        --overlay-bg: rgba(0, 0, 0, 0.5);
      }

      /* Dark mode color overrides */
      .dark-mode {
        --bg-primary: #1a1a1a;
        --bg-secondary: #2d2d2d;
        --bg-card: #2d2d2d;
        --bg-hover: #3a3a3a;
        --bg-input: #3a3a3a;
        --text-primary: #e0e0e0;
        --text-secondary: #a0a0a0;
        --text-muted: #888;
        --text-light: #b0b0b0;
        --border-color: #404040;
        --border-light: #333;
        --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
        --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.3);
        --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.4);
        --btn-primary-bg: #0d6efd;
        --btn-primary-hover: #0b5ed7;
        --btn-secondary-bg: #5c636a;
        --btn-secondary-hover: #4e555b;
        --btn-success-bg: #198754;
        --btn-success-hover: #157347;
        --btn-danger-bg: #dc3545;
        --btn-danger-hover: #bb2d3b;
        --status-approved: #0f5132;
        --status-approved-text: #75b798;
        --status-pending: #664d03;
        --status-pending-text: #ffda6a;
        --status-rejected: #842029;
        --status-rejected-text: #ea868f;
        --status-unknown: #41464b;
        --status-unknown-text: #9a9ea2;
        --toast-success-bg: #0f5132;
        --toast-error-bg: #842029;
        --toast-info-bg: #055160;
        --scrollbar-track: #2d2d2d;
        --scrollbar-thumb: #555;
        --scrollbar-thumb-hover: #666;
        --overlay-bg: rgba(0, 0, 0, 0.7);
      }

      /* Dark mode toggle styles */
      .header-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .dark-mode-toggle {
        position: relative;
      }

      .dark-mode-checkbox {
        position: absolute;
        opacity: 0;
        cursor: pointer;
      }

      .dark-mode-label {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 60px;
        height: 30px;
        background-color: var(--border-color);
        border-radius: 15px;
        padding: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        position: relative;
      }

      .dark-mode-checkbox:checked + .dark-mode-label {
        background-color: var(--btn-primary-bg);
      }

      .dark-mode-label::after {
        content: '';
        position: absolute;
        top: 3px;
        left: 3px;
        width: 24px;
        height: 24px;
        background-color: white;
        border-radius: 50%;
        transition: transform 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .dark-mode-checkbox:checked + .dark-mode-label::after {
        transform: translateX(30px);
      }

      .icon-sun,
      .icon-moon {
        font-size: 16px;
        transition: opacity 0.3s ease;
      }

      .icon-sun {
        opacity: 1;
      }

      .icon-moon {
        opacity: 0.3;
      }

      .dark-mode-checkbox:checked + .dark-mode-label .icon-sun {
        opacity: 0.3;
      }

      .dark-mode-checkbox:checked + .dark-mode-label .icon-moon {
        opacity: 1;
      }

      /* Apply CSS variables to body */
      body {
        margin: 0;
        padding: 20px;
        font-family: Arial, sans-serif;
        background-color: var(--bg-primary);
        color: var(--text-primary);
        transition:
          background-color 0.3s ease,
          color 0.3s ease;
      }
      h1 {
        color: var(--text-primary);
        font-size: 24px;
        margin: 0;
      }
      .content {
        background-color: var(--bg-card);
        padding: 20px;
        border-radius: 8px;
        box-shadow: var(--shadow-sm);
      }
      .info {
        color: var(--text-secondary);
        font-size: 14px;
        line-height: 1.5;
      }

      .btn {
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        font-size: 14px;
        cursor: pointer;
        transition:
          background-color 0.2s,
          color 0.2s;
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .btn-primary {
        background-color: var(--btn-primary-bg);
        color: white;
      }

      .btn-primary:hover:not(:disabled) {
        background-color: var(--btn-primary-hover);
      }

      .btn-secondary {
        background-color: var(--btn-secondary-bg);
        color: white;
      }

      .btn-secondary:hover:not(:disabled) {
        background-color: var(--btn-secondary-hover);
      }

      .expenses-section {
        margin-top: 20px;
        background-color: var(--bg-card);
        border-radius: 8px;
        box-shadow: var(--shadow-sm);
      }

      .expenses-header {
        padding: 20px;
        border-bottom: 1px solid var(--border-color);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background-color 0.2s ease;
      }

      .expenses-header:hover {
        background-color: var(--bg-hover);
      }

      .expenses-title {
        color: var(--text-primary);
        font-size: 18px;
        font-weight: 600;
        margin: 0;
      }

      .expenses-toggle {
        color: var(--text-muted);
        font-size: 14px;
        font-weight: bold;
        transition: transform 0.2s ease;
      }

      .expenses-toggle.expanded {
        transform: rotate(180deg);
      }

      .expenses-content {
        padding: 20px;
      }

      .expenses-container {
        margin-bottom: 15px;
      }

      .expense-actions {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
      }

      .btn-success {
        background-color: var(--btn-success-bg);
        color: white;
      }

      .btn-success:hover:not(:disabled) {
        background-color: var(--btn-success-hover);
      }

      .expenses-status {
        margin-bottom: 15px;
        font-size: 13px;
        color: var(--text-muted);
        min-height: 20px;
      }

      .expenses-status.success {
        color: var(--btn-success-bg);
      }

      .expenses-status.error {
        color: var(--btn-danger-bg);
      }

      .expenses-list {
        max-height: 400px;
        overflow-y: auto;
        border: 1px solid var(--border-color);
        border-radius: 4px;
      }

      .expense-item {
        padding: 12px;
        border-bottom: 1px solid var(--border-light);
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        background-color: var(--bg-card);
      }

      .expense-item:last-child {
        border-bottom: none;
      }

      .expense-item:hover {
        background-color: var(--bg-hover);
        cursor: pointer;
      }

      .expense-arrow {
        color: var(--text-muted);
        font-size: 18px;
        font-weight: bold;
        margin-left: 10px;
        align-self: center;
      }

      .expense-main {
        flex: 1;
      }

      .expense-merchant {
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 4px;
      }

      .expense-details {
        font-size: 12px;
        color: var(--text-muted);
        margin-bottom: 2px;
      }

      .expense-id {
        font-size: 11px;
        color: var(--text-muted);
        margin-top: 4px;
        font-family: monospace;
      }

      .expense-amount {
        font-weight: 600;
        color: var(--text-primary);
        text-align: right;
      }

      .expense-status {
        font-size: 11px;
        padding: 2px 6px;
        border-radius: 3px;
        margin-top: 4px;
        display: inline-block;
      }

      .expense-status.approved {
        background-color: var(--status-approved);
        color: var(--status-approved-text);
      }

      .expense-status.pending {
        background-color: var(--status-pending);
        color: var(--status-pending-text);
      }

      .expense-status.rejected {
        background-color: var(--status-rejected);
        color: var(--status-rejected-text);
      }

      .expense-status.unknown {
        background-color: var(--status-unknown);
        color: var(--status-unknown-text);
      }

      .loading-spinner {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid var(--border-light);
        border-top: 2px solid var(--btn-primary-bg);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-right: 8px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(0, 123, 255, 0.3);
        border-top-color: #007bff;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-right: 8px;
        vertical-align: middle;
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: var(--text-muted);
        font-style: italic;
      }

      /* Sorting and pagination controls */
      .expense-controls {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        align-items: center;
        flex-wrap: wrap;
      }

      .control-group {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .control-group label {
        font-size: 14px;
        color: var(--text-secondary);
        white-space: nowrap;
      }

      .control-group select {
        padding: 6px 10px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 14px;
        background-color: var(--bg-input);
        color: var(--text-primary);
        cursor: pointer;
        min-width: 140px;
      }

      .control-group select:hover {
        border-color: var(--btn-primary-bg);
      }

      .control-group select:focus {
        outline: none;
        border-color: var(--btn-primary-bg);
        box-shadow: 0 0 0 2px rgba(13, 110, 253, 0.25);
      }

      /* Search Section Styles */
      .expense-search {
        margin: 15px 0;
        padding: 15px;
        background-color: var(--card-bg);
        border-radius: 8px;
        border: 1px solid var(--border-color);
      }

      .search-container h4 {
        margin: 0 0 15px 0;
        color: var(--text-primary);
        font-size: 16px;
        font-weight: 600;
      }

      .search-controls {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .search-group {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .search-group label {
        min-width: 120px;
        font-size: 14px;
        color: var(--text-secondary);
      }

      .search-input {
        flex: 1;
        padding: 8px 12px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        background-color: var(--bg-input);
        color: var(--text-primary);
        font-size: 14px;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--btn-primary-bg);
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
      }

      .search-actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
        justify-content: flex-end;
      }

      .search-actions button {
        padding: 8px 16px;
      }

      /* Responsive design improvements */
      @media (max-width: 400px) {
        body {
          padding: 15px;
        }

        .content,
        .expenses-section {
          padding: 15px;
        }

        h1 {
          font-size: 20px;
          margin-bottom: 15px;
        }

        .expenses-section h2 {
          font-size: 16px;
          margin-bottom: 12px;
        }

        .expense-item {
          padding: 10px;
        }

        .expense-merchant {
          font-size: 14px;
        }

        .expense-details {
          font-size: 11px;
        }

        .expense-amount {
          font-size: 14px;
        }

        .btn {
          padding: 6px 12px;
          font-size: 13px;
        }

        .expense-actions {
          flex-direction: column;
          gap: 8px;
        }

        .expense-controls {
          flex-direction: column;
          gap: 10px;
          align-items: stretch;
        }

        .control-group {
          flex-direction: column;
          gap: 5px;
          align-items: stretch;
        }

        .control-group select {
          min-width: 100%;
        }
      }

      /* Ensure good text readability */
      .expense-item {
        transition: background-color 0.2s ease;
      }

      /* Better scrollbar styling for webkit browsers */
      .expenses-list::-webkit-scrollbar {
        width: 6px;
      }

      .expenses-list::-webkit-scrollbar-track {
        background: var(--scrollbar-track);
        border-radius: 3px;
      }

      .expenses-list::-webkit-scrollbar-thumb {
        background: var(--scrollbar-thumb);
        border-radius: 3px;
      }

      .expenses-list::-webkit-scrollbar-thumb:hover {
        background: var(--scrollbar-thumb-hover);
      }

      /* Expense Detail View Styles */
      .expense-detail {
        margin-top: 20px;
        background-color: var(--bg-card);
        padding: 20px;
        border-radius: 8px;
        box-shadow: var(--shadow-sm);
      }

      .detail-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--border-color);
      }

      .detail-header h3 {
        margin: 0;
        color: var(--text-primary);
        font-size: 18px;
      }

      .detail-content {
        margin-bottom: 20px;
      }

      .detail-field {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        padding: 12px 0;
        border-bottom: 1px solid var(--border-light);
      }

      .detail-field:last-child {
        border-bottom: none;
      }

      .expense-id-field {
        background-color: var(--bg-hover);
        padding: 12px;
        margin: 0 -16px 12px -16px;
        border-bottom: 1px solid var(--border-color);
      }

      .expense-id-field .detail-value {
        font-family: monospace;
        font-size: 13px;
      }

      .detail-label {
        font-weight: 500;
        color: var(--text-light);
        min-width: 120px;
      }

      .detail-value {
        text-align: right;
        color: var(--text-primary);
        flex: 1;
        word-break: break-word;
      }

      .detail-value.highlight {
        font-weight: 600;
        font-size: 16px;
      }

      .detail-actions {
        display: flex;
        gap: 10px;
        padding-top: 15px;
        border-top: 1px solid var(--border-color);
      }

      .btn-primary {
        background-color: var(--btn-primary-bg);
        border-color: var(--btn-primary-bg);
      }

      .btn-primary:hover:not(:disabled) {
        background-color: var(--btn-primary-hover);
        border-color: var(--btn-primary-hover);
      }

      /* Templates Section Styles */
      .templates-section {
        margin-top: 20px;
        background-color: var(--bg-card);
        border-radius: 8px;
        box-shadow: var(--shadow-sm);
      }

      .templates-header {
        padding: 20px;
        border-bottom: 1px solid var(--border-color);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background-color 0.2s ease;
      }

      .templates-header:hover {
        background-color: var(--bg-hover);
      }

      .templates-title {
        color: var(--text-primary);
        font-size: 18px;
        font-weight: 600;
        margin: 0;
      }

      .templates-toggle {
        color: var(--text-muted);
        font-size: 14px;
        font-weight: bold;
        transition: transform 0.2s ease;
      }

      .templates-toggle.expanded {
        transform: rotate(180deg);
      }

      .templates-content {
        padding: 20px;
      }

      .templates-section h2 {
        color: var(--text-primary);
        font-size: 18px;
        margin-bottom: 15px;
      }

      .template-controls {
        margin-bottom: 15px;
      }

      .templates-status {
        margin-bottom: 15px;
        font-size: 13px;
        color: var(--text-muted);
        min-height: 20px;
      }

      .templates-status.success {
        color: var(--btn-success-bg);
      }

      .templates-status.error {
        color: var(--btn-danger-bg);
      }

      /* Template List Styles */
      .template-list {
        max-height: 400px;
        overflow-y: auto;
        border: 1px solid var(--border-color);
        border-radius: 4px;
      }

      .template-item {
        background-color: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 12px;
        transition:
          box-shadow 0.2s ease,
          border-color 0.2s ease;
        cursor: pointer;
      }

      .template-item:hover {
        box-shadow: var(--shadow-md);
        border-color: var(--btn-primary-bg);
      }

      .template-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .template-name {
        font-weight: 600;
        font-size: 16px;
        color: var(--text-primary);
        flex: 1;
      }

      .template-actions {
        display: flex;
        gap: 8px;
      }

      .btn-icon {
        background: none;
        border: none;
        padding: 4px;
        border-radius: 4px;
        cursor: pointer;
        color: var(--text-muted);
        transition:
          background-color 0.2s ease,
          color 0.2s ease;
      }

      .btn-icon:hover {
        background-color: var(--bg-hover);
        color: var(--text-primary);
      }

      .template-details {
        margin-bottom: 16px;
      }

      .template-merchant {
        font-size: 14px;
        color: var(--text-light);
        margin-bottom: 4px;
      }

      .template-amount {
        font-size: 18px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 8px;
      }

      .template-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 12px;
        color: var(--text-muted);
      }

      .template-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 12px;
        border-top: 1px solid var(--border-light);
      }

      /* Template Detail/Edit Styles */
      .template-detail {
        margin-top: 20px;
        background-color: var(--bg-card);
        padding: 20px;
        border-radius: 8px;
        box-shadow: var(--shadow-sm);
      }

      .template-detail .detail-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--border-color);
      }

      .template-detail .detail-header h3 {
        margin: 0;
        color: var(--text-primary);
        font-size: 18px;
      }

      /* Form Styles */
      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
        color: var(--text-primary);
      }

      .form-control {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 14px;
        background-color: var(--bg-input);
        color: var(--text-primary);
        transition:
          border-color 0.15s ease-in-out,
          box-shadow 0.15s ease-in-out;
      }

      .form-control:focus {
        border-color: var(--btn-primary-bg);
        outline: 0;
        box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
      }

      .input-group {
        display: flex;
      }

      .currency-select {
        width: 80px;
        margin-right: 8px;
      }

      .form-actions {
        display: flex;
        gap: 10px;
        padding-top: 20px;
        border-top: 1px solid var(--border-color);
      }

      /* Template Creation Dialog */
      .template-creation-dialog {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1000;
      }

      .dialog-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--overlay-bg);
      }

      .dialog-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: var(--bg-card);
        border-radius: 8px;
        box-shadow: var(--shadow-md);
        width: 90%;
        max-width: 500px;
        max-height: 80%;
        overflow-y: auto;
      }

      .dialog-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 20px 0;
        margin-bottom: 20px;
      }

      .dialog-header h3 {
        margin: 0;
        font-size: 18px;
        color: var(--text-primary);
      }

      .btn-close {
        background: none;
        border: none;
        font-size: 24px;
        color: var(--text-muted);
        cursor: pointer;
        padding: 0;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .btn-close:hover {
        color: var(--text-primary);
      }

      .dialog-body {
        padding: 0 20px;
      }

      .dialog-actions {
        padding: 20px;
        border-top: 1px solid var(--border-color);
        display: flex;
        gap: 10px;
      }

      .template-preview {
        background-color: var(--bg-hover);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        padding: 15px;
        margin-top: 15px;
      }

      .template-preview h4 {
        margin: 0 0 10px 0;
        font-size: 14px;
        color: var(--text-primary);
      }

      /* Status Indicators */
      .status-indicator {
        display: inline-block;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        margin-right: 6px;
      }

      .status-indicator.success {
        background-color: var(--btn-success-bg);
      }

      .status-indicator.failed {
        background-color: var(--btn-danger-bg);
      }

      .status-indicator.pending {
        background-color: #ffc107;
      }

      .status-indicator.paused {
        background-color: var(--text-muted);
      }

      .status-indicator.processing {
        background-color: var(--btn-primary-bg);
        animation: pulse 1.5s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      /* Toast Notifications */
      .toast {
        background: var(--bg-card);
        border-radius: 8px;
        box-shadow: var(--shadow-lg);
        padding: 16px 20px;
        min-width: 300px;
        max-width: 400px;
        display: flex;
        align-items: center;
        gap: 12px;
        animation: slideIn 0.3s ease-out;
        position: relative;
      }

      .toast.success {
        border-left: 4px solid var(--btn-success-bg);
      }

      .toast.error {
        border-left: 4px solid var(--btn-danger-bg);
      }

      .toast.info {
        border-left: 4px solid #17a2b8;
      }

      .toast-icon {
        font-size: 20px;
        font-weight: bold;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
      }

      .toast.success .toast-icon {
        color: var(--btn-success-bg);
        background: var(--toast-success-bg);
      }

      .toast.error .toast-icon {
        color: var(--btn-danger-bg);
        background: var(--toast-error-bg);
      }

      .toast.info .toast-icon {
        color: #17a2b8;
        background: var(--toast-info-bg);
      }

      .toast-content {
        flex: 1;
      }

      .toast-title {
        font-weight: 600;
        margin-bottom: 4px;
        color: var(--text-primary);
      }

      .toast-message {
        font-size: 14px;
        color: var(--text-muted);
      }

      .toast-close {
        position: absolute;
        top: 8px;
        right: 8px;
        background: none;
        border: none;
        font-size: 20px;
        color: var(--text-muted);
        cursor: pointer;
        padding: 0;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .toast-close:hover {
        color: var(--text-primary);
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      /* Error Handling */
      .form-group.has-error .form-control {
        border-color: var(--btn-danger-bg);
        box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
      }

      .form-group.has-error .error-message {
        display: block;
        color: var(--btn-danger-bg);
        font-size: 12px;
        margin-top: 4px;
      }

      .form-group .error-message {
        display: none;
      }

      /* Button Variants */
      .btn-danger {
        background-color: var(--btn-danger-bg);
        color: white;
        border: 1px solid var(--btn-danger-bg);
      }

      .btn-danger:hover:not(:disabled) {
        background-color: var(--btn-danger-hover);
        border-color: var(--btn-danger-hover);
      }

      /* Notifications */
      .notification {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
        margin-bottom: 16px;
        border-radius: 4px;
        border-left: 4px solid;
      }

      .notification.success {
        background-color: var(--status-approved);
        border-left-color: var(--btn-success-bg);
        color: var(--status-approved-text);
      }

      .notification.error {
        background-color: var(--status-rejected);
        border-left-color: var(--btn-danger-bg);
        color: var(--status-rejected-text);
      }

      .notification.warning {
        background-color: var(--status-pending);
        border-left-color: #ffc107;
        color: var(--status-pending-text);
      }

      .notification.info {
        background-color: var(--toast-info-bg);
        border-left-color: #17a2b8;
        color: #c8e6ec;
      }

      .notification-content {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .notification-close {
        background: none;
        border: none;
        font-size: 18px;
        cursor: pointer;
        color: inherit;
        opacity: 0.7;
      }

      .notification-close:hover {
        opacity: 1;
      }

      /* Empty State */
      .template-empty {
        text-align: center;
        padding: 40px 20px;
        color: var(--text-muted);
      }

      .template-empty h4 {
        margin: 10px 0;
        color: var(--text-light);
      }

      .template-empty p {
        margin-bottom: 20px;
        font-size: 14px;
      }

      /* Scheduling Configuration Styles */
      .scheduling-section {
        margin-top: 20px;
        padding: 15px;
        background-color: var(--bg-hover);
        border-radius: 8px;
        border: 1px solid var(--border-color);
      }

      .scheduling-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .scheduling-header h4 {
        margin: 0;
        color: var(--text-primary);
        font-size: 16px;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 48px;
        height: 24px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--text-muted);
        transition: 0.3s;
        border-radius: 24px;
      }

      .slider:before {
        position: absolute;
        content: '';
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.3s;
        border-radius: 50%;
      }

      input:checked + .slider {
        background-color: var(--btn-primary-bg);
      }

      input:checked + .slider:before {
        transform: translateX(24px);
      }

      .scheduling-config {
        margin-top: 15px;
      }

      .frequency-options {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
      }

      .frequency-options label {
        display: flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
        font-weight: normal;
      }

      .time-input-group {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .time-input-group select {
        width: auto;
        min-width: 60px;
      }

      .day-checkboxes {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .day-checkboxes label {
        display: flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
        font-weight: normal;
        min-width: 60px;
      }

      .scheduling-preview {
        margin: 15px 0;
        padding: 10px;
        background-color: var(--bg-hover);
        border-radius: 4px;
        font-size: 14px;
      }

      .scheduling-actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      .form-text {
        font-size: 12px;
        color: var(--text-muted);
        margin-top: 4px;
      }

      /* Execution History Styles */
      .execution-history {
        margin-top: 20px;
        padding: 15px;
        background-color: var(--bg-hover);
        border-radius: 8px;
        border: 1px solid var(--border-color);
      }

      .execution-history h4 {
        margin: 0 0 15px 0;
        color: var(--text-primary);
        font-size: 16px;
      }

      .history-table {
        border: 1px solid var(--border-color);
        border-radius: 4px;
        overflow: hidden;
      }

      .history-header {
        display: flex;
        background-color: var(--bg-hover);
        font-weight: 600;
        font-size: 14px;
        color: var(--text-light);
      }

      .history-header > div {
        padding: 12px 8px;
        border-right: 1px solid var(--border-color);
      }

      .history-header > div:last-child {
        border-right: none;
      }

      .col-datetime {
        flex: 2;
        min-width: 140px;
      }

      .col-status {
        flex: 1;
        min-width: 100px;
      }

      .col-expense {
        flex: 2;
        min-width: 120px;
      }

      .history-body {
        max-height: 300px;
        overflow-y: auto;
      }

      .history-row {
        display: flex;
        border-bottom: 1px solid var(--border-light);
        background-color: var(--bg-card);
      }

      .history-row:hover {
        background-color: var(--bg-hover);
      }

      .history-row:last-child {
        border-bottom: none;
      }

      .history-row > div {
        padding: 10px 8px;
        border-right: 1px solid var(--border-light);
        font-size: 13px;
      }

      .history-row > div:last-child {
        border-right: none;
      }

      .history-pagination {
        margin-top: 10px;
        text-align: center;
      }

      .execution-status {
        display: flex;
        align-items: center;
        gap: 6px;
      }

      /* Scheduling indicator styles */
      .scheduling-info {
        margin-top: 8px;
      }

      .scheduling-indicator {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        font-size: 12px;
        padding: 2px 6px;
        border-radius: 3px;
      }

      .scheduling-indicator.active {
        color: var(--status-approved-text);
        background-color: var(--status-approved);
      }

      .scheduling-indicator.paused {
        color: var(--status-pending-text);
        background-color: var(--status-pending);
      }

      .scheduling-indicator.inactive {
        color: var(--text-muted);
        background-color: var(--status-unknown);
      }

      /* Icon replacements for cross-browser compatibility */
      .icon-clock::before {
        content: '🕒';
        font-size: 12px;
      }

      .icon-clock-outline::before {
        content: '⏰';
        font-size: 12px;
      }

      /* Help Section Styles */
      /* Settings Section */
      .settings-section {
        margin-bottom: 20px;
        background-color: var(--bg-card);
        border-radius: 8px;
        box-shadow: var(--shadow-sm);
        overflow: hidden;
      }

      .settings-header {
        padding: 15px 20px;
        background-color: var(--bg-hover);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background-color 0.2s ease;
      }

      .settings-header:hover {
        background-color: var(--bg-hover);
      }

      .settings-title {
        font-size: 16px;
        font-weight: 600;
        color: var(--text-primary);
      }

      .settings-toggle {
        color: var(--text-secondary);
        transition: transform 0.2s ease;
      }

      .settings-toggle.expanded {
        transform: rotate(180deg);
      }

      .settings-content {
        padding: 20px;
        background-color: var(--background-color);
      }

      .setting-item {
        margin-bottom: 15px;
      }

      .setting-label {
        display: flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
        font-size: 14px;
        color: var(--text-primary);
      }

      .setting-label input[type="checkbox"] {
        cursor: pointer;
      }

      .setting-description {
        margin-top: 5px;
        margin-left: 24px;
        font-size: 12px;
        color: var(--text-secondary);
      }

      .help-section {
        margin-bottom: 20px;
        background-color: var(--bg-card);
        border-radius: 8px;
        box-shadow: var(--shadow-sm);
        overflow: hidden;
      }

      .help-header {
        padding: 15px 20px;
        background-color: var(--bg-hover);
        border-bottom: 1px solid var(--border-color);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background-color 0.2s ease;
      }

      .help-header:hover {
        background-color: var(--bg-hover);
      }

      .help-title {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 16px;
      }

      .help-toggle {
        color: var(--text-muted);
        font-size: 14px;
        font-weight: bold;
        transition: transform 0.2s ease;
      }

      .help-toggle.expanded {
        transform: rotate(180deg);
      }

      .help-content {
        padding: 20px;
        background-color: var(--bg-card);
      }

      .help-item {
        margin-bottom: 20px;
      }

      .help-item:last-child {
        margin-bottom: 0;
      }

      .help-item h4 {
        margin: 0 0 8px 0;
        color: var(--text-primary);
        font-size: 14px;
        font-weight: 600;
      }

      .help-item p {
        margin: 0 0 4px 0;
        color: var(--text-secondary);
        font-size: 13px;
        line-height: 1.4;
      }

      .help-item p:last-child {
        margin-bottom: 0;
      }

      /* Help table styles */
      .help-table {
        width: 100%;
        border-collapse: collapse;
        margin: 10px 0;
        font-size: 13px;
      }

      .help-table th {
        background: var(--bg-hover);
        padding: 8px;
        text-align: left;
        font-weight: 600;
        border-bottom: 2px solid var(--border-color);
        color: var(--text-primary);
      }

      .help-table td {
        padding: 8px;
        border-bottom: 1px solid var(--border-color);
        color: var(--text-secondary);
      }

      .help-table tr:last-child td {
        border-bottom: none;
      }

      .help-table code {
        background: var(--bg-hover);
        padding: 2px 4px;
        border-radius: 3px;
        font-family: monospace;
        font-size: 12px;
      }

      /* Execution Timeline Styles */
      .execution-timeline {
        margin-top: 15px;
        padding: 12px;
        background-color: var(--bg-hover);
        border: 1px solid var(--border-color);
        border-radius: 6px;
      }

      .execution-timeline strong {
        display: block;
        margin-bottom: 10px;
        font-size: 14px;
        color: var(--btn-primary-hover);
      }

      .timeline-items {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .timeline-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        background-color: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 13px;
      }

      .timeline-time {
        font-weight: 500;
        color: var(--text-primary);
      }

      .timeline-relative {
        color: var(--text-muted);
        font-style: italic;
        font-size: 12px;
      }

      /* Responsive adjustments for templates */
      @media (max-width: 400px) {
        .templates-section {
          padding: 15px;
        }

        .template-item {
          padding: 12px;
        }

        .template-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }

        .template-actions {
          align-self: flex-end;
        }

        .template-footer {
          flex-direction: column;
          gap: 10px;
          align-items: stretch;
        }

        .dialog-content {
          width: 95%;
          margin: 10px;
        }

        .form-actions,
        .dialog-actions {
          flex-direction: column;
        }

        .frequency-options {
          flex-direction: column;
          gap: 8px;
        }

        .day-checkboxes {
          flex-direction: column;
          gap: 8px;
        }

        .time-input-group {
          flex-direction: column;
          gap: 8px;
        }

        .time-input-group select {
          width: 100%;
        }

        .history-header,
        .history-row {
          font-size: 11px;
        }

        .col-datetime {
          min-width: 100px;
        }

        .col-status {
          min-width: 70px;
        }

        .col-expense {
          min-width: 90px;
        }
      }

      /* Modal System Styles */
      .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0);
        transition: background-color 0.3s ease;
        z-index: 10000;
      }

      .modal-backdrop-visible {
        background-color: rgba(0, 0, 0, 0.5);
      }

      .modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: var(--bg-card);
        border-radius: 8px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        max-width: 500px;
        width: 90%;
        max-height: 90vh;
        overflow: auto;
        opacity: 0;
        transition: opacity 0.3s ease, transform 0.3s ease;
        z-index: 10001;
      }

      .modal-visible {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }

      .modal-content {
        display: flex;
        flex-direction: column;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 20px;
        border-bottom: 1px solid var(--border-color);
      }

      .modal-title {
        margin: 0;
        font-size: 18px;
        font-weight: 600;
        color: var(--text-primary);
      }

      .modal-close {
        background: none;
        border: none;
        font-size: 24px;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        transition: background-color 0.2s ease;
      }

      .modal-close:hover {
        background-color: var(--bg-hover);
        color: var(--text-primary);
      }

      .modal-body {
        padding: 20px;
        flex: 1;
        overflow-y: auto;
      }

      .modal-footer {
        display: flex;
        justify-content: flex-end;
        gap: 8px;
        padding: 16px 20px;
        border-top: 1px solid var(--border-color);
      }

      .modal-button {
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        border: none;
        cursor: pointer;
        transition: all 0.2s ease;
        min-width: 80px;
      }

      .modal-button-primary {
        background-color: var(--btn-primary-bg);
        color: white;
      }

      .modal-button-primary:hover {
        background-color: var(--btn-primary-hover);
      }

      .modal-button-secondary {
        background-color: var(--bg-hover);
        color: var(--text-primary);
      }

      .modal-button-secondary:hover {
        background-color: var(--border-color);
      }

      .modal-button-danger {
        background-color: var(--btn-danger-bg);
        color: white;
      }

      .modal-button-danger:hover {
        background-color: var(--btn-danger-hover);
      }

      .modal-message {
        margin: 0 0 16px 0;
        color: var(--text-secondary);
        line-height: 1.5;
      }

      .modal-input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        font-size: 14px;
        background: var(--bg-input);
        color: var(--text-primary);
        transition: border-color 0.2s ease;
      }

      .modal-input:focus {
        outline: none;
        border-color: var(--btn-primary-bg);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .modal-error {
        color: #ef4444;
        font-size: 13px;
        margin-top: 8px;
      }

      .modal-spinner {
        width: 40px;
        height: 40px;
        border: 3px solid var(--border-color);
        border-top-color: var(--btn-primary-bg);
        border-radius: 50%;
        animation: modal-spin 1s linear infinite;
        margin-bottom: 16px;
      }

      @keyframes modal-spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Authentication Modal Styles */
      .auth-modal-content {
        text-align: center;
        padding: 20px;
      }

      .auth-modal-icon {
        margin-bottom: 20px;
        color: var(--btn-primary-bg);
      }

      .auth-modal-message h3 {
        margin: 0 0 12px 0;
        font-size: 20px;
        color: var(--text-primary);
      }

      .auth-modal-message p {
        margin: 8px 0;
        color: var(--text-secondary);
        line-height: 1.5;
      }

      .auth-modal-instructions {
        font-size: 14px;
        color: var(--text-muted);
      }

      .auth-modal-status {
        margin: 16px 0;
        padding: 12px;
        border-radius: 6px;
        background-color: var(--bg-hover);
        font-size: 14px;
      }

      .auth-modal-error {
        margin: 16px 0;
        padding: 12px;
        border-radius: 6px;
        background-color: #fee2e2;
        color: #991b1b;
        font-size: 14px;
      }

      .auth-modal-success {
        color: #059669;
        font-weight: 500;
      }

      .auth-modal-warning {
        color: #d97706;
      }

      .auth-modal-info {
        color: var(--btn-primary-bg);
      }

      .authentication-modal .modal-footer {
        justify-content: center;
        gap: 12px;
      }

      /* Receipt Upload Modal Styles */
      .receipt-upload-modal-content {
        text-align: center;
        padding: 20px;
      }

      .receipt-upload-icon {
        margin-bottom: 20px;
        color: var(--btn-primary-bg);
      }

      .receipt-upload-message h3 {
        margin: 0 0 8px 0;
        font-size: 18px;
        color: var(--text-primary);
      }

      .receipt-upload-message p {
        margin: 0 0 20px 0;
        color: var(--text-secondary);
        font-size: 14px;
      }

      .receipt-drop-zone {
        border: 2px dashed var(--border-color);
        border-radius: 8px;
        padding: 40px 20px;
        background-color: var(--bg-secondary);
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .receipt-drop-zone:hover {
        border-color: var(--btn-primary-bg);
        background-color: var(--bg-hover);
      }

      .receipt-drop-zone.drag-over {
        border-color: var(--btn-primary-bg);
        background-color: rgba(79, 70, 229, 0.05);
        transform: scale(1.02);
      }

      .drop-zone-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
      }

      .drop-zone-content svg {
        color: var(--text-muted);
      }

      .drop-zone-text {
        font-size: 16px;
        color: var(--text-primary);
        margin: 0;
      }

      .drop-zone-subtext {
        font-size: 14px;
        color: var(--text-muted);
        margin: 0;
      }

      .select-file-button {
        padding: 8px 20px;
        background-color: var(--btn-primary-bg);
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 14px;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      .select-file-button:hover {
        background-color: var(--btn-primary-hover);
      }

      .drop-zone-formats {
        font-size: 12px;
        color: var(--text-muted);
        margin: 0;
      }

      .receipt-preview {
        padding: 16px;
        background-color: var(--bg-secondary);
        border-radius: 8px;
        margin: 20px 0;
      }

      .preview-content {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .file-icon {
        color: var(--btn-primary-bg);
        flex-shrink: 0;
      }

      .file-info {
        flex: 1;
        text-align: left;
      }

      .file-name {
        display: block;
        font-size: 14px;
        color: var(--text-primary);
        font-weight: 500;
        margin-bottom: 4px;
        word-break: break-all;
      }

      .file-size {
        display: block;
        font-size: 12px;
        color: var(--text-muted);
      }

      .remove-file-btn {
        padding: 4px 8px;
        background-color: transparent;
        color: var(--text-muted);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .remove-file-btn:hover {
        color: #dc2626;
        border-color: #dc2626;
        background-color: #fee2e2;
      }

      .upload-status {
        margin: 16px 0;
        padding: 12px;
        border-radius: 6px;
        font-size: 14px;
      }

      .status-message {
        margin: 0;
      }

      .status-success {
        background-color: #d1fae5;
        color: #059669;
      }

      .status-error {
        background-color: #fee2e2;
        color: #991b1b;
      }

      .status-info {
        background-color: var(--bg-hover);
        color: var(--text-secondary);
      }

      .receipt-upload-modal .upload-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .receipt-upload-modal .modal-footer {
        justify-content: space-between;
      }

      /* Submit vs Draft Modal Styles */
      .submit-draft-modal-content {
        text-align: center;
        padding: 20px;
      }

      .submit-draft-icon {
        margin-bottom: 20px;
        color: var(--btn-primary-bg);
      }

      .submit-draft-message h3 {
        margin: 0 0 12px 0;
        font-size: 20px;
        color: var(--text-primary);
      }

      .submit-draft-message p {
        margin: 8px 0;
        color: var(--text-secondary);
        line-height: 1.5;
      }

      .expense-info {
        background-color: var(--bg-secondary);
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 14px;
        margin: 12px 0;
      }

      .submit-options {
        margin: 24px 0;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .option-card {
        display: flex;
        align-items: flex-start;
        gap: 16px;
        padding: 20px;
        background-color: var(--bg-secondary);
        border: 2px solid var(--border-color);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: left;
      }

      .option-card:hover:not(.disabled) {
        border-color: var(--btn-primary-bg);
        background-color: var(--bg-hover);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .option-card.disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .option-icon {
        flex-shrink: 0;
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--bg-primary);
        border-radius: 8px;
      }

      .submit-option .option-icon {
        color: #10b981;
      }

      .draft-option .option-icon {
        color: #6366f1;
      }

      .option-content {
        flex: 1;
      }

      .option-content h4 {
        margin: 0 0 8px 0;
        font-size: 16px;
        font-weight: 600;
        color: var(--text-primary);
      }

      .option-description {
        margin: 0 0 12px 0;
        font-size: 14px;
        color: var(--text-secondary);
        line-height: 1.5;
      }

      .option-benefits {
        margin: 0;
        padding-left: 20px;
        list-style: none;
      }

      .option-benefits li {
        position: relative;
        padding-left: 20px;
        margin: 6px 0;
        font-size: 13px;
        color: var(--text-muted);
      }

      .option-benefits li::before {
        content: '✓';
        position: absolute;
        left: 0;
        color: var(--btn-primary-bg);
      }

      .option-divider {
        display: flex;
        align-items: center;
        margin: 8px 0;
      }

      .option-divider::before,
      .option-divider::after {
        content: '';
        flex: 1;
        height: 1px;
        background-color: var(--border-color);
      }

      .option-divider span {
        padding: 0 16px;
        font-size: 12px;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .submit-draft-modal .modal-footer {
        justify-content: space-between;
      }

      .submit-draft-modal .draft-button {
        background-color: #6366f1;
        color: white;
      }

      .submit-draft-modal .draft-button:hover:not(:disabled) {
        background-color: #4f46e5;
      }

      .submit-draft-modal .submit-button {
        background-color: #10b981;
        color: white;
      }

      .submit-draft-modal .submit-button:hover:not(:disabled) {
        background-color: #059669;
      }
    </style>
  </head>
  <body>
    <!-- Toast notification container -->
    <div
      id="toastContainer"
      style="
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: 10px;
      "
    ></div>

    <div class="header-container">
      <h1>expensabl</h1>
      <div class="dark-mode-toggle">
        <input type="checkbox" id="darkModeToggle" class="dark-mode-checkbox" />
        <label for="darkModeToggle" class="dark-mode-label">
          <span class="icon-sun">☀️</span>
          <span class="icon-moon">🌙</span>
        </label>
      </div>
    </div>

    <!-- Help Section -->
    <!-- Settings Section -->
    <div class="settings-section">
      <div class="settings-header" id="settingsHeader">
        <span class="settings-title">Settings</span>
        <span class="settings-toggle" id="settingsToggle">▼</span>
      </div>
      <div class="settings-content" id="settingsContent" style="display: none">
        <div class="setting-item">
          <label class="setting-label">
            <input type="checkbox" id="searchEnabled" checked />
            <span>Enable Expense Search</span>
          </label>
          <div class="setting-description">
            Show search functionality to filter expenses by merchant name and date range
          </div>
        </div>
        <div class="setting-item">
          <label class="setting-label">
            <input type="checkbox" id="autoFetchExpenses" checked />
            <span>Auto-fetch Expenses on Open</span>
          </label>
          <div class="setting-description">
            Automatically fetch and display expenses when the sidepanel opens
          </div>
        </div>
      </div>
    </div>

    <div class="help-section">
      <div class="help-header" id="helpHeader">
        <span class="help-title">Help & Getting Started</span>
        <span class="help-toggle" id="helpToggle">▼</span>
      </div>
      <div class="help-content" id="helpContent" style="display: none">
        <!-- Content will be injected dynamically -->
      </div>
    </div>

    <div class="expenses-section">
      <div class="expenses-header" id="expensesHeader">
        <h2 class="expenses-title">My Expenses</h2>
        <span class="expenses-toggle" id="expensesToggle">▼</span>
      </div>
      <div class="expenses-content" id="expensesContent">
        <div class="expenses-container">
          <div class="expense-actions">
            <button id="fetchExpenses" class="btn btn-success">Fetch Expenses</button>
            <button id="refreshExpenses" class="btn btn-secondary" style="display: none">
              Refresh
            </button>
          </div>

          <!-- Sorting and Pagination Controls -->
          <div class="expense-controls" id="expenseControls" style="display: none">
            <div class="control-group">
              <label for="sortOrder">Sort by:</label>
              <select id="sortOrder">
                <option value="date-desc">Date (Newest First)</option>
                <option value="date-asc">Date (Oldest First)</option>
                <option value="amount-desc">Amount (Highest First)</option>
                <option value="amount-asc">Amount (Lowest First)</option>
                <option value="merchant-asc">Merchant (A-Z)</option>
                <option value="merchant-desc">Merchant (Z-A)</option>
              </select>
            </div>

            <div class="control-group">
              <label for="itemsPerPage">Show:</label>
              <select id="itemsPerPage">
                <option value="5">5 items</option>
                <option value="10">10 items</option>
                <option value="20">20 items</option>
                <option value="50">50 items</option>
                <option value="100">100 items</option>
              </select>
            </div>

            <div class="control-group">
              <label for="merchantCategory">Category:</label>
              <select id="merchantCategory">
                <option value="">All Categories</option>
                <!-- Categories will be populated dynamically -->
              </select>
            </div>

            <div class="control-group">
              <label for="expenseStatus">Status:</label>
              <select id="expenseStatus">
                <option value="">All Status</option>
                <option value="SUBMITTED">Submitted</option>
                <option value="PENDING">Pending</option>
                <option value="APPROVED">Approved</option>
                <option value="REJECTED">Rejected</option>
                <option value="FLAGGED">Flagged</option>
              </select>
            </div>

            <div class="control-group">
              <button
                id="clearFilters"
                class="btn btn-secondary"
                style="padding: 6px 12px; font-size: 14px"
              >
                Clear Filters
              </button>
            </div>
          </div>

          <!-- Search Section -->
          <div class="expense-search" id="expenseSearch" style="display: none">
            <div class="search-container">
              <h4>Search Expenses</h4>
              <div class="search-controls">
                <div class="search-group">
                  <label for="merchantSearch">Merchant Name:</label>
                  <input 
                    type="text" 
                    id="merchantSearch" 
                    placeholder="Search by merchant name..."
                    class="search-input"
                  />
                </div>
                
                <div class="search-group">
                  <label for="dateFromSearch">From Date:</label>
                  <input 
                    type="date" 
                    id="dateFromSearch"
                    class="search-input"
                  />
                </div>
                
                <div class="search-group">
                  <label for="dateToSearch">To Date:</label>
                  <input 
                    type="date" 
                    id="dateToSearch"
                    class="search-input"
                  />
                </div>
                
                <div class="search-actions">
                  <button id="performSearch" class="btn btn-primary">Search</button>
                  <button id="clearSearch" class="btn btn-secondary">Clear</button>
                </div>
              </div>
            </div>
          </div>

          <div class="expenses-status" id="expensesStatus">
            Click "Fetch Expenses" to load your recent expenses
          </div>
          <div class="expenses-list" id="expensesList" style="display: none">
            <!-- Expenses will be populated here -->
          </div>
        </div>

        <!-- Expense Detail View -->
        <div class="expense-detail" id="expenseDetail" style="display: none">
          <div class="detail-header">
            <button id="backToList" class="btn btn-secondary">← Back to List</button>
            <h3>Expense Details</h3>
          </div>
          <div class="detail-content" id="expenseDetailContent">
            <!-- Expense details will be populated here -->
          </div>
          <div class="detail-actions">
            <button id="duplicateExpense" class="btn btn-primary">Duplicate Expense</button>
            <button id="saveAsTemplate" class="btn btn-secondary">Save as Template</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Templates Section -->
    <div class="templates-section">
      <div class="templates-header" id="templatesHeader">
        <h2 class="templates-title">Expense Templates</h2>
        <span class="templates-toggle" id="templatesToggle">▼</span>
      </div>
      <div class="templates-content" id="templatesContent">
        <div class="template-controls">
          <div class="templates-status" id="templatesStatus">
            Click "Fetch Expenses" to create templates from existing expenses
          </div>
        </div>
        <div class="template-content">
          <!-- Template List View -->
          <div class="template-list" id="templateList" style="display: none">
            <div class="template-list-content" id="templateListContent">
              <!-- Template items will be populated here -->
            </div>
          </div>

          <!-- Template Detail/Edit View -->
          <div class="template-detail" id="templateDetail" style="display: none">
            <div
              class="detail-header"
              style="display: grid; grid-template-columns: 1fr auto 1fr; align-items: center"
            >
              <button id="backToTemplates" class="btn btn-secondary" style="justify-self: start">
                ← Back
              </button>
              <h3 id="templateDetailTitle" style="margin: 0; text-align: center">
                Template Details
              </h3>
              <button id="toggleTemplateEdit" class="btn btn-secondary" style="justify-self: end">
                Edit
              </button>
            </div>

            <div class="detail-content" id="templateDetailContent">
              <!-- Template details in read-only format -->
            </div>

            <!-- Execution History Section -->
            <div class="execution-history" id="executionHistory" style="display: none">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 15px;
                "
              >
                <h4 style="margin: 0">Execution History</h4>
                <button class="btn btn-secondary" id="refreshHistory">Refresh</button>
              </div>
              <div class="history-table">
                <div class="history-header">
                  <div class="col-datetime">Date/Time</div>
                  <div class="col-status">Status</div>
                  <div class="col-expense">Expense</div>
                </div>
                <div class="history-body" id="historyBody">
                  <!-- History rows populated dynamically -->
                </div>
              </div>
              <div class="history-pagination" style="display: none">
                <button class="btn btn-secondary" id="loadMoreHistory">Load More</button>
              </div>
            </div>

            <div class="template-edit-form" id="templateEditForm" style="display: none">
              <!-- Template editing form -->
              <div class="form-group">
                <label for="templateName">Template Name</label>
                <input type="text" id="templateName" class="form-control" required />
                <div class="error-message" id="templateNameError"></div>
              </div>

              <div class="form-group">
                <label for="templateMerchant">Merchant</label>
                <input type="text" id="templateMerchant" class="form-control" required />
                <div class="error-message" id="templateMerchantError"></div>
              </div>

              <div class="form-group">
                <label for="templateAmount">Amount</label>
                <div class="input-group">
                  <select id="templateCurrency" class="form-control currency-select">
                    <option value="USD">USD</option>
                    <option value="EUR">EUR</option>
                    <option value="GBP">GBP</option>
                  </select>
                  <input
                    type="number"
                    id="templateAmount"
                    class="form-control"
                    step="0.01"
                    required
                  />
                </div>
                <div class="error-message" id="templateAmountError"></div>
              </div>

              <div class="form-group">
                <label for="templateDescription">Description</label>
                <textarea id="templateDescription" class="form-control" rows="3"></textarea>
              </div>

              <!-- Scheduling Configuration Section -->
              <div class="scheduling-section">
                <div class="scheduling-header">
                  <h4>Schedule Template</h4>
                  <div class="scheduling-toggle">
                    <label class="switch">
                      <input type="checkbox" id="enableScheduling" />
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>

                <div class="scheduling-config" id="schedulingConfig" style="display: none">
                  <div class="form-group">
                    <label>Frequency</label>
                    <div class="frequency-options">
                      <label><input type="radio" name="frequency" value="daily" /> Daily</label>
                      <label><input type="radio" name="frequency" value="weekly" /> Weekly</label>
                      <label><input type="radio" name="frequency" value="monthly" /> Monthly</label>
                      <label><input type="radio" name="frequency" value="custom" /> Custom</label>
                    </div>
                  </div>

                  <div class="form-group time-settings">
                    <label id="timeSettingsLabel">Execution Start Time</label>
                    <div class="time-input-group">
                      <select id="hour" class="form-control">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9" selected>9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                      </select>
                      <select id="minute" class="form-control">
                        <option value="0" selected>00</option>
                        <option value="15">15</option>
                        <option value="30">30</option>
                        <option value="45">45</option>
                      </select>
                      <select id="ampm" class="form-control">
                        <option value="AM" selected>AM</option>
                        <option value="PM">PM</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group weekly-settings" style="display: none">
                    <label>Days of Week</label>
                    <div class="day-checkboxes">
                      <label><input type="checkbox" value="monday" /> Mon</label>
                      <label><input type="checkbox" value="tuesday" /> Tue</label>
                      <label><input type="checkbox" value="wednesday" /> Wed</label>
                      <label><input type="checkbox" value="thursday" /> Thu</label>
                      <label><input type="checkbox" value="friday" /> Fri</label>
                      <label><input type="checkbox" value="saturday" /> Sat</label>
                      <label><input type="checkbox" value="sunday" /> Sun</label>
                    </div>
                  </div>

                  <div class="form-group monthly-settings" style="display: none">
                    <label>Day of Month</label>
                    <select id="dayOfMonth" class="form-control">
                      <option value="1" selected>1st</option>
                      <option value="2">2nd</option>
                      <option value="3">3rd</option>
                      <option value="4">4th</option>
                      <option value="5">5th</option>
                      <option value="6">6th</option>
                      <option value="7">7th</option>
                      <option value="8">8th</option>
                      <option value="9">9th</option>
                      <option value="10">10th</option>
                      <option value="11">11th</option>
                      <option value="12">12th</option>
                      <option value="13">13th</option>
                      <option value="14">14th</option>
                      <option value="15">15th</option>
                      <option value="16">16th</option>
                      <option value="17">17th</option>
                      <option value="18">18th</option>
                      <option value="19">19th</option>
                      <option value="20">20th</option>
                      <option value="21">21st</option>
                      <option value="22">22nd</option>
                      <option value="23">23rd</option>
                      <option value="24">24th</option>
                      <option value="25">25th</option>
                      <option value="26">26th</option>
                      <option value="27">27th</option>
                      <option value="28">28th</option>
                      <option value="29">29th</option>
                      <option value="30">30th</option>
                      <option value="31">31st</option>
                      <option value="last">Last Day</option>
                    </select>
                  </div>

                  <div class="form-group custom-settings" style="display: none">
                    <label>Custom Interval</label>
                    <select id="customInterval" class="form-control">
                      <option value="1">Every 1 minute</option>
                      <option value="5">Every 5 minutes</option>
                      <option value="10">Every 10 minutes</option>
                      <option value="15">Every 15 minutes</option>
                      <option value="30">Every 30 minutes</option>
                      <option value="45">Every 45 minutes</option>
                      <option value="60" selected>Every 60 minutes</option>
                    </select>
                    <small class="form-text" id="intervalHelpText"
                      >Select the interval between executions</small
                    >
                  </div>

                  <div class="scheduling-preview">
                    <strong>Next execution:</strong> <span id="nextExecutionPreview">-</span>
                  </div>

                  <div id="executionTimeline" class="execution-timeline" style="display: none">
                    <strong>Upcoming executions:</strong>
                    <div
                      id="executionTimelineWarning"
                      class="notification warning"
                      style="display: none; margin-bottom: 10px"
                    >
                      <strong>⚠️ Rapid Execution Warning:</strong> Intervals under 5 minutes may
                      cause high API usage and performance impact.
                    </div>
                    <div class="timeline-items">
                      <div class="timeline-item">
                        <span class="timeline-time" data-index="0">-</span>
                        <span class="timeline-relative" data-index="0">-</span>
                      </div>
                      <div class="timeline-item">
                        <span class="timeline-time" data-index="1">-</span>
                        <span class="timeline-relative" data-index="1">-</span>
                      </div>
                      <div class="timeline-item">
                        <span class="timeline-time" data-index="2">-</span>
                        <span class="timeline-relative" data-index="2">-</span>
                      </div>
                      <div class="timeline-item">
                        <span class="timeline-time" data-index="3">-</span>
                        <span class="timeline-relative" data-index="3">-</span>
                      </div>
                      <div class="timeline-item">
                        <span class="timeline-time" data-index="4">-</span>
                        <span class="timeline-relative" data-index="4">-</span>
                      </div>
                    </div>
                  </div>

                  <div class="scheduling-actions">
                    <button
                      type="button"
                      id="pauseSchedule"
                      class="btn btn-secondary"
                      style="display: none"
                    >
                      Pause
                    </button>
                    <button
                      type="button"
                      id="resumeSchedule"
                      class="btn btn-secondary"
                      style="display: none"
                    >
                      Resume
                    </button>
                  </div>
                </div>
              </div>

              <div class="form-actions">
                <button id="saveTemplate" class="btn btn-primary">Save Changes</button>
                <button id="cancelTemplateEdit" class="btn btn-secondary">Cancel</button>
              </div>
            </div>

            <div class="detail-actions" id="templateDetailActions">
              <button id="applyTemplate" class="btn btn-primary">Apply Template</button>
              <button id="duplicateTemplate" class="btn btn-secondary">Duplicate</button>
              <button id="deleteTemplate" class="btn btn-danger">Delete</button>
            </div>
          </div>

          <!-- Template Creation Dialog -->
          <div class="template-creation-dialog" id="templateCreationDialog" style="display: none">
            <div class="dialog-overlay"></div>
            <div class="dialog-content">
              <div class="dialog-header">
                <h3>Save as Template</h3>
                <button id="closeTemplateDialog" class="btn-close">&times;</button>
              </div>
              <div class="dialog-body">
                <div class="form-group">
                  <label for="newTemplateName">Template Name</label>
                  <input
                    type="text"
                    id="newTemplateName"
                    class="form-control"
                    placeholder="Enter template name"
                    required
                  />
                  <div class="error-message" id="newTemplateNameError"></div>
                </div>
                <div class="template-preview" id="templatePreview">
                  <!-- Preview of template data -->
                </div>
              </div>
              <div class="dialog-actions">
                <button id="createTemplate" class="btn btn-primary">Create Template</button>
                <button id="cancelTemplateCreation" class="btn btn-secondary">Cancel</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="sidepanel.js"></script>
  </body>
</html>
